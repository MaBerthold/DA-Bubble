<div class="workspace-container">
  <div class="server-container">
    <div class="server-logo-name">
      <img src="./assets/img/workspace_logo.png" />
      <span class="server-name">Code learning</span>
    </div>
    <div class="server-edit-icon">
      <img class="normal-img" src="./assets/img/edit_square.png" />
      <img class="hover-img" src="./assets/img/edit_square_hover.png" />
    </div>
  </div>

  <div class="channels-container">
    <mat-accordion hideToggle>
      <mat-expansion-panel
        [expanded]="true"
        (opened)="panelOpenState1 = true"
        (closed)="panelOpenState1 = false"
      >
        <mat-expansion-panel-header
          [collapsedHeight]="'60px'"
          [expandedHeight]="'60px'"
        >
          <div class="channels-title-hover">
            <mat-panel-title class="channels-title">
              <mat-icon *ngIf="!panelOpenState1">arrow_right</mat-icon>
              <mat-icon *ngIf="panelOpenState1">arrow_drop_down</mat-icon>
              <div></div>
              <img class="normal-img" src="./assets/img/channels_icon.png" />
              <img
                class="hover-img"
                src="./assets/img/channels_icon_hover.png"
              />
              <span>Channels</span>
            </mat-panel-title>
          </div>
        </mat-expansion-panel-header>

        <div class="channels-list">
          <div
            *ngFor="let channel of channels"
            class="channels-name selectable"
            (click)="handleClick($event)"
          >
            <span class="hashtag">#</span>
            <span>{{ channel.channelname }}</span>
          </div>
        </div>
        <div class="channels-add-hover">
          <div class="channels-add" (click)="toggleChannelCreateWindow()">
            <mat-icon>add_circle_outline</mat-icon>
            <span>Channel hinzuf端gen</span>
          </div>
        </div>
      </mat-expansion-panel>
    </mat-accordion>
    <div>
      <div class="channels-add-icon" (click)="toggleChannelCreateWindow()">
        +
      </div>
    </div>
  </div>

  <div class="direct-message-container">
    <mat-accordion hideToggle>
      <mat-expansion-panel
        [expanded]="true"
        (opened)="panelOpenState2 = true"
        (closed)="panelOpenState2 = false"
      >
        <mat-expansion-panel-header
          [collapsedHeight]="'60px'"
          [expandedHeight]="'60px'"
        >
          <div class="channels-title-hover">
            <mat-panel-title class="channels-title direct-message-title">
              <mat-icon *ngIf="!panelOpenState2">arrow_right</mat-icon>
              <mat-icon *ngIf="panelOpenState2">arrow_drop_down</mat-icon>
              <div></div>
              <img class="normal-img" src="./assets/img/account_circle.png" />
              <img
                class="hover-img"
                src="./assets/img/account_circle_hover.png"
              />
              <span>Direktnachrichten</span>
            </mat-panel-title>
          </div>
        </mat-expansion-panel-header>

        <div class="contacts-list">
          <div
            class="selectable"
            (click)="handleClick($event)"
            *ngFor="let user of allUsers"
          >
            <span class="profile">
              <img [src]="getProfileImagePath(user)" />
              <p class="active-point" *ngIf="user.isOnline == true"></p>
            </span>
            <span>{{ user.firstname }} {{ user.lastname }}</span>
          </div>
        </div>
      </mat-expansion-panel>
    </mat-accordion>
  </div>
</div>

<div
  class="channel-create-container"
  *ngIf="isChannelCreateWindow"
  #channelCreateContainer
>
  <div *ngIf="isFirstScreen">
    <div class="channel-create-title">
      <div>Channel erstellen</div>
      <mat-icon
        class="channels-create-close"
        (click)="toggleChannelCreateWindow()"
        >close</mat-icon
      >
    </div>
    <div class="mrgn-bt-25">
      Channels dienen deinem Team zur Kommunikation. Am besten sollten sie
      themenbezogen sein #marketing zum Beispiel.
    </div>
    <div class="fnt-wt-700 mrgn-bt-25">Channel-Name</div>
  </div>
  <form [formGroup]="channelCreateForm" class="channel-create-form" action="">
    <div *ngIf="isFirstScreen">
      <div class="relative">
        <input
          formControlName="channelName"
          required
          placeholder="z.B. Kooperationsprojekte"
          type="text"
          class="channel-create-input channel-create-name-input mrgn-bt-25"
          [(ngModel)]="createdChannelName"
        />
        <span class="channel-create-input-hashtag">#</span>
      </div>
      <div class="fnt-wt-700 mrgn-bt-25">
        Beschreibung
        <span class="fnt-wt-400 gray"> (optional) </span>
      </div>
      <input
        placeholder="Dein Text hier"
        type="text"
        class="channel-create-input channel-create-description-input mrgn-bt-25"
        [(ngModel)]="createdChannelDescription"
      />
      <div class="btn-container">
        <button
          [disabled]="channelCreateForm.invalid"
          (click)="toggleChannelCreateContainer(); addChannel()"
          class="btn fnt-wt-700"
        >
          Erstellen
        </button>
      </div>
    </div>

    <div *ngIf="isSecondScreen">
      <div class="channel-create-title">
        <div>Leute hinzuf端gen</div>
        <mat-icon
          class="channels-create-close"
          (click)="toggleChannelCreateWindow()"
          >close</mat-icon
        >
      </div>
      <mat-radio-group class="example-radio-group mrgn-bt-25">
        <mat-radio-button
          (click)="onHideClick()"
          class="example-radio-button"
          [value]="'allMembers'"
          >Alle Mitglieder von OfficeTeam hinzuf端gen</mat-radio-button
        >
        <mat-radio-button
          (click)="onShowClick()"
          class="example-radio-button"
          [value]="'specificMembers'"
          >Bestimmte Leute hinzuf端gen</mat-radio-button
        >
      </mat-radio-group>
      <div class="user-selection-container mrgn-bt-25" *ngIf="showInputNames">
        <div class="selected-users-container">
          <div class="selected-users" *ngFor="let user of selectedUsers">
            <span class="profile">
              <img [src]="getProfileImagePath(user)" />
            </span>
            {{ user.firstname + " " + user.lastname }}
            <span (click)="removeUser(user)"><mat-icon>close</mat-icon></span>
          </div>
          <div class="relative">
            <input
              placeholder="Name eingeben"
              type="text"
              class="channel-create-input channel-create-description-input"
              (input)="onSearchInputChange($event)"
            />
            <div
              class="contacts-list-pop-up"
              *ngIf="showInputNames && searchQuery.trim()"
            >
              <div class="contacts-list">
                <div
                  *ngFor="let user of filterUsers()"
                  (click)="selectUser(user)"
                >
                  <span class="profile">
                    <img [src]="getProfileImagePath(user)" />
                    <p class="active-point" *ngIf="user.isOnline == true"></p>
                  </span>
                  <span>{{ user.firstname }} {{ user.lastname }}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="btn-container">
        <button [disabled]="channelCreateForm.invalid" class="btn fnt-wt-700">
          Erstellen
        </button>
      </div>
    </div>
  </form>
</div>
<div
  class="channel-create-window"
  *ngIf="isChannelCreateWindow"
  (click)="toggleChannelCreateWindow()"
  #channelCreateWindow
></div>
