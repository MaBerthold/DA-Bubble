<div class="workspace-container">
  <div class="server-container">
    <div class="server-logo-name">
      <img src="./assets/img/workspace_logo.png" />
      <span class="server-name">Code learning</span>
    </div>
    <div class="server-edit-icon">
      <img class="normal-img" src="./assets/img/edit_square.png" />
      <img class="hover-img" src="./assets/img/edit_square_hover.png" />
    </div>
  </div>

  <div class="channels-container">
    <mat-accordion hideToggle>
      <mat-expansion-panel
        [expanded]="true"
        (opened)="panelOpenState1 = true"
        (closed)="panelOpenState1 = false"
      >
        <mat-expansion-panel-header [collapsedHeight]="'60px'" [expandedHeight]="'60px'">
          <div class="channels-title-hover">
            <mat-panel-title class="channels-title">
              <mat-icon *ngIf="!panelOpenState1">arrow_right</mat-icon>
              <mat-icon *ngIf="panelOpenState1">arrow_drop_down</mat-icon>
              <div></div>
              <img class="normal-img" src="./assets/img/channels_icon.png" />
              <img
                class="hover-img"
                src="./assets/img/channels_icon_hover.png"
              />
              <span>Channels</span>
            </mat-panel-title>
          </div>
        </mat-expansion-panel-header>

        <div class="channels-list">
          <div class="channels-name selectable" (click)="handleClick($event)">
            <span class="hashtag">#</span>
            <span>{{ this.channelDataService.channelName }}</span>
          </div>

          <div class="channels-name selectable" (click)="handleClick($event)">
            <span class="hashtag">#</span>
            <span>Office-team</span>
          </div>
        </div>
        <div class="channels-add-hover">
          <div class="channels-add" (click)="showChannelCreateWindow()">
            <mat-icon>add_circle_outline</mat-icon>
            <span>Channel hinzufügen</span>
          </div>
        </div>
      </mat-expansion-panel>
    </mat-accordion>
    <div>
      <div class="channels-add-icon" (click)="showChannelCreateWindow()">+</div>
    </div>
  </div>

  <div class="direct-message-container">
    <mat-accordion hideToggle>
      <mat-expansion-panel
        [expanded]="true"
        (opened)="panelOpenState2 = true"
        (closed)="panelOpenState2 = false"
      >
        <mat-expansion-panel-header [collapsedHeight]="'60px'" [expandedHeight]="'60px'">
          <div class="channels-title-hover">
            <mat-panel-title class="channels-title direct-message-title">
              <mat-icon *ngIf="!panelOpenState2">arrow_right</mat-icon>
              <mat-icon *ngIf="panelOpenState2">arrow_drop_down</mat-icon>
              <div></div>
              <img class="normal-img" src="./assets/img/account_circle.png" />
              <img
                class="hover-img"
                src="./assets/img/account_circle_hover.png"
              />
              <span>Direktnachrichten</span>
            </mat-panel-title>
          </div>
        </mat-expansion-panel-header>

        <div class="contacts-list">
          <div class="selectable" (click)="handleClick($event)">
            <span class="profile">
              <img [src]="getProfileImagePath()"/>
              <p class="active-point" [ngClass]="{'online': userIsOnline, 'offline': !userIsOnline}"></p>
            </span>

            <span>{{ userFullName }} (Du)</span>
          </div>
          <div class="selectable" (click)="handleClick($event)">
            <span><img src="./assets/img/avatarSofia.png" /></span>
            <span>Sofia Müller</span>
          </div>
        </div>
      </mat-expansion-panel>
    </mat-accordion>
  </div>
</div>

<div
  class="channel-create-window"
  (click)="hideChannelCreateWindow($event)"
  #channelCreateWindow
>
  <div class="channel-create-container" #channelCreateContainer>
    <div class="channel-create-title">
      <div class="fnt-sz-24 fnt-wt-700 first-screen">Channel erstellen</div>
      <div class="fnt-sz-24 fnt-wt-700 second-screen">Leute hinzufügen</div>
      <mat-icon
        class="channels-create-close-hover"
        (click)="closeChannelCreateWindow()"
        >close</mat-icon
      >
    </div>
    <div class="first-screen">
      Channels dienen deinem Team zur Kommunikation. Am besten sollten sie
      themenbezogen sein #marketing zum Beispiel.
    </div>
    <div class="fnt-wt-700 first-screen">Channel-Name</div>
    <form [formGroup]="channelCreateForm" class="channel-create-form" action="">
      <div class="relative first-screen">
        <input
          formControlName="channelName"
          required
          placeholder="z.B. Kooperationsprojekte"
          type="text"
          class="channel-create-input channel-create-name-input"
        />
        <span class="channel-create-input-hashtag">#</span>
      </div>
      <div class="fnt-wt-700 first-screen">
        Beschreibung
        <span class="fnt-wt-400 gray"> (optional) </span>
      </div>
      <input
        placeholder="Dein Text hier"
        type="text"
        class="channel-create-input channel-create-description-input first-screen"
      />

      <mat-radio-group class="example-radio-group second-screen">
        <mat-radio-button
          (click)="onHideClick()"
          class="example-radio-button second-screen"
          [value]="'allMembers'"
          >Alle Mitglieder von OfficeTeam hinzufügen</mat-radio-button
        >
        <mat-radio-button
          (click)="onShowClick()"
          class="example-radio-button second-screen"
          [value]="'specificMembers'"
          >Bestimmte Leute hinzufügen</mat-radio-button
        >
      </mat-radio-group>
      <div class="user-selection-container" *ngIf="showInputNames">
        
        <div class="selected-users-container" >
          <div class="selected-users" *ngFor="let user of selectedUsers">
            <img [src]="'../../../assets/img/' + user.profileImg"/>
            {{ user.firstname + ' ' + user.lastname }}
            <span (click)="removeUser(user)"><mat-icon>close</mat-icon></span>
          </div>
          
          <div  class="relative">
            <input
            placeholder="Name eingeben"
            type="text"
            class="channel-create-input channel-create-description-input"
            (input)="onSearchInputChange($event)"
            />
            
            <div class="contacts-list-pop-up" *ngIf="showInputNames && searchQuery.trim()">
              <div class="contacts-list">
                <div *ngFor="let user of filterUsers()"  (click)="selectUser(user)">
                  <img [src]="'../../../assets/img/' + user.profileImg"/>
                  <span>{{ user.firstname }} {{ user.lastname }}</span>
                </div>
              </div>
            </div>
          </div>
          
        </div>
        
      </div>

      <div class="btn-container">
        <button
          [disabled]="channelCreateForm.invalid"
          (click)="channelCreateSecondScreen()"
          class="btn fnt-wt-700 first-screen"
        >
          Erstellen
        </button>
        <button
          [disabled]="channelCreateForm.invalid"
          class="btn fnt-wt-700 second-screen"
        >
          Erstellen
        </button>
      </div>
    </form>
  </div>
</div>
